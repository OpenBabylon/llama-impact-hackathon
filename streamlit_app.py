import streamlit as st
import time
import pandas as pd

from fireworks.client import Fireworks

FIREWORKS_API_KEY = st.secrets["FIREWORKS_API_KEY"]

# Show title and description.
st.title("Llama-Exam-Tests generator for Ukrainian History")
st.write("Upload a textbook below to generate exam questions")
st.write(
    "Slides [click here](https://pitch.com/v/llama-x-ukrainian-education-f3knrk/11309135-0991-4ca5-a799-626cf95c6bd1)"
)

# Ask user for their OpenAI API key via `st.text_input`.
# Alternatively, you can store the API key in `./.streamlit/secrets.toml` and access it
# via `st.secrets`, see https://docs.streamlit.io/develop/concepts/connections/secrets-management

if not FIREWORKS_API_KEY:
    st.info("Please add your Fireworks API key to continue.", icon="üóùÔ∏è")
else:
    # Create an Fireworks client.
    client = Fireworks(api_key=FIREWORKS_API_KEY)

    # Let the user upload a file via `st.file_uploader`.
    uploaded_file = st.file_uploader(
        "Upload your textbook (.txt or .md)", type=("txt", "md")
    )

    # Ask the user for a question via `st.text_area`.
    # question = st.text_area(
    #     "Now ask a question about the document!",
    #     placeholder="Can you give me a short summary?",
    #     disabled=not uploaded_file,
    # )
    document = None
    if st.button("Use example textbook"):
        document = """–£–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π —Ä–£—Ö –£ –±–£–∫–æ–≤–∏–ù—ñ —Ç–∞ –∑–∞–∫–∞—Ä–ø–∞—Ç—Ç—ñ –Ω–∞ –ø–æ—á–∞—Ç–∫—É XX —Å—Ç. –°—É—Å–ø—ñ–ª—å–Ω–æ-–ø–æ–ª—ñ—Ç–∏—á–Ω–µ –∂–∏—Ç—Ç—è —Ç–æ–≥–æ—á–∞—Å–Ω–æ—ó –ë—É–∫–æ–≤–∏–Ω–∏ –∑–Ω–∞—á–Ω–æ –ø–æ–∂–≤–∞–≤–∏–ª–æ—Å—è. –ù–∞–¥–∑–≤–∏—á–∞–π–Ω–æ—é –ø–æ–ª—ñ—Ç–∏—á–Ω–æ—é –ø–æ–¥—ñ—î—é –≤ –∫—Ä–∞—ó —Å—Ç–∞–ª–æ —É—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤ 1903 —Ä. –≤ –º—ñ—Å—Ü–µ–≤–æ–º—É —Å–µ–π–º—ñ ¬´–í—ñ–ª—å–Ω–æ–¥—É–º–Ω–æ–≥–æ —Å–æ—é–∑—É¬ª. –ô–æ–≥–æ —Å–ø—ñ–≤–∑–∞—Å–Ω–æ–≤–Ω–∏–∫–∞–º–∏ —Å—Ç–∞–ª–∏ —Ç—Ä–∏ –Ω–∞–π–≤–ø–ª–∏–≤–æ–≤—ñ—à—ñ –ø–æ- —Å—Ç–∞—Ç—ñ —Å—É—Å–ø—ñ–ª—å–Ω–æ-–ø–æ–ª—ñ—Ç–∏—á–Ω–æ–≥–æ –∂–∏—Ç—Ç—è –ë—É–∫–æ–≤–∏–Ω–∏ ‚Äî –ª—ñ–¥–µ—Ä —É–∫—Ä–∞—ó–Ω- —Å—å–∫–∏—Ö –Ω–∞—Ä–æ–¥–æ–≤—Ü—ñ–≤ –ú–∏–∫–æ–ª–∞ –í–∞—Å–∏–ª—å–∫–æ, –ª—ñ–¥–µ—Ä —Ä—É–º—É–Ω—Å—å–∫–∏—Ö –Ω–∞—Ü—ñ–æ- –Ω–∞–ª-–¥–µ–º–æ–∫—Ä–∞—Ç—ñ–≤ –ê—É—Ä–µ–ª –û–Ω—á—É–ª —ñ –ª—ñ–¥–µ—Ä —î–≤—Ä–µ–π—Å—å–∫–æ—ó —Å—ñ–æ–Ω—ñ—Å—Ç—Å—å–∫–æ—ó –ø–∞—Ä—Ç—ñ—ó –ë–µ–Ω–Ω–æ –®—Ç—Ä–∞—É—Ö–µ—Ä. –ß–ª–µ–Ω–∏ —Å–æ—é–∑—É –ø—Ä–∞–≥–Ω—É–ª–∏ –ø–æ-–Ω–æ–≤–æ–º—É —Ä–æ–∑–≤‚Äô—è–∑–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏ –∫—Ä–∞—é: –≤–æ–Ω–∏ –∑–∞—è–≤–∏–ª–∏, —â–æ –Ω–∞ –ø–µ—Ä—à–µ –º—ñ—Å—Ü–µ –≤–∏—Å—É–≤–∞—é—Ç—å –≤–∏–º–æ–≥–∏ –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —Å–æ—Ü—ñ–∞–ª—å–Ω–æ-–µ–∫–æ–Ω–æ–º—ñ—á–Ω–æ–≥–æ —Å—Ç–∞–Ω–æ- –≤–∏—â–∞, —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –ø–æ–ª—ñ—Ç–∏—á–Ω–∏—Ö –ø—Ä–∞–≤, –∞ —Ç–∞–∫–æ–∂ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è –Ω–∞- —Ü—ñ–æ–Ω–∞–ª—å–Ω–∏—Ö –ø–æ—Ç—Ä–µ–± —É—Å—ñ—Ö –Ω–∞—Ä–æ–¥—ñ–≤, —è–∫—ñ –Ω–∞—Å–µ–ª—è—é—Ç—å –ë—É–∫–æ–≤–∏–Ω—É. –£ 1905 —Ä. —á–µ—Ä–µ–∑ —Å—É–ø–µ—Ä–µ—á–Ω–æ—Å—Ç—ñ –º—ñ–∂ –π–æ–≥–æ —á–ª–µ–Ω–∞–º–∏ —Å–æ—é–∑ —Ä–æ–∑–ø–∞–≤—Å—è. 12 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 1905 —Ä. –±—É–∫–æ–≤–∏–Ω—Å—å–∫—ñ –Ω–∞—Ä–æ–¥–æ–≤—Ü—ñ –æ–±‚Äô—î–¥–Ω–∞–ª–∏—Å—è –≤ ¬´–ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—É —Ä–∞–¥—É —Ä—É—Å–∏–Ω—ñ–≤ –Ω–∞ –ë—É–∫–æ–≤–∏–Ω—ñ¬ª, —è–∫—É –Ω–µ–æ—Ñ—ñ—Ü—ñ–π–Ω–æ –Ω–∞- –∑–∏–≤–∞–ª–∏ –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ-–¥–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω–æ—é –ø–∞—Ä—Ç—ñ—î—é, –ø—ñ–¥–∫—Ä–µ—Å–ª—é—é—á–∏ —Ü–∏–º —ñ–¥–µ–π–Ω—É —Å–ø—ñ–ª—å–Ω—ñ—Å—Ç—å —ñ–∑ –ø–æ–¥—ñ–±–Ω–æ—é –ø–∞—Ä—Ç—ñ—î—é –≤ –ì–∞–ª–∏—á–∏–Ω—ñ. –ü–∞—Ä—Ç—ñ—è –≤–∏- —Å—Ç—É–ø–∞–ª–∞ –∑–∞ –∑–∞–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ, —Ä—ñ–≤–Ω–æ–≥–æ –π –ø—Ä—è–º–æ–≥–æ –≤–∏–±–æ—Ä- —á–æ–≥–æ –ø—Ä–∞–≤–∞, —É —Å—ñ–ª—å—Å—å–∫–æ–º—É –≥–æ—Å–ø–æ–¥–∞—Ä—Å—Ç–≤—ñ –≤–∏—Å—É–≤–∞–ª–∞ –∑–∞–≤–¥–∞–Ω–Ω—è —Ä–æ–∑–≤–∏- –≤–∞—Ç–∏ —Å–ø—ñ–ª—á–∞–Ω—Å—å–∫–∏–π —Ä—É—Ö, –æ–±“ë—Ä—É–Ω—Ç–æ–≤—É—é—á–∏ –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –ø–æ—Ç—Ä–µ–±–∏ —É–∫—Ä–∞—ó–Ω—Ü—ñ–≤, –≤–∏–∑–Ω–∞–≤–∞–ª–∞ —Ç–∞–∫–µ —Å–∞–º–µ –ø—Ä–∞–≤–æ –∑–∞ —ñ–Ω—à–∏–º–∏ –Ω–∞—Ü—ñ—è–º–∏ –∫—Ä–∞—é. –£ —á–µ—Ä–≤–Ω—ñ 1907 —Ä. –≤—ñ–¥ ¬´–ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó —Ä–∞–¥–∏ —Ä—É—Å–∏–Ω—ñ–≤ –Ω–∞ –ë—É–∫–æ- –≤–∏–Ω—ñ¬ª –≤—ñ–¥–æ–∫—Ä–µ–º–∏–ª–æ—Å—è –ª—ñ–≤–µ –∫—Ä–∏–ª–æ –π –∑–∞—Å–Ω—É–≤–∞–ª–æ –†–∞–¥–∏–∫–∞–ª—å–Ω—É –ø–∞—Ä- —Ç—ñ—é. –í–∏–∑–≤–æ–ª–µ–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ –Ω–∞—Ä–æ–¥—É —Ü—è –ø–∞—Ä—Ç—ñ—è –ø–æ–≤‚Äô—è–∑—É–≤–∞–ª–∞ —ñ–∑ —à–∏—Ä–æ–∫–∏–º–∏ —Å–æ—Ü—ñ–∞–ª—å–Ω–æ-–µ–∫–æ–Ω–æ–º—ñ—á–Ω–∏–º–∏ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è–º–∏ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤- –ª–µ–Ω–Ω—è–º —Å–æ—Ü—ñ–∞–ª—ñ–∑–º—É. –ú–∞–π–∂–µ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –≤ –ë—É–∫–æ–≤–∏–Ω—ñ —Å—Ñ–æ—Ä–º—É–≤–∞–ª–∞—Å—è –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ —Å–æ—Ü—ñ–∞–ª-–¥–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω–∞ –ø–∞—Ä—Ç—ñ—è, —è–∫–∞ –ø—Ä–æ–ø–æ–≤—ñ–¥—É–≤–∞–ª–∞ —ñ–¥–µ—ó –º–∞—Ä–∫—Å–∏–∑–º—É, –≤–∏–º–∞–≥–∞–ª–∞ –¥–æ–∫–æ—Ä—ñ–Ω–Ω–∏—Ö –∑–º—ñ–Ω —É —Å—É—Å–ø—ñ–ª—å—Å—Ç–≤—ñ. –û–¥–Ω–∞–∫ –±—ñ–ª—å—à—ñ—Å—Ç—å –≥–∞—Å–µ–ª —Å–æ—Ü—ñ–∞–ª-–¥–µ–º–æ–∫—Ä–∞—Ç—ñ–≤ –±—É–ª–∏ –Ω–µ–∑—Ä–æ–∑—É–º—ñ–ª—ñ —Å–µ–ª—è–Ω–∞–º, –∞ —Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤ —É –∫—Ä–∞—ó –±—É–ª–æ –¥—É–∂–µ –º–∞–ª–æ.
        –£ 1907 —Ä. –≤ –ë—É–∫–æ–≤–∏–Ω—ñ –≤—ñ–¥–±—É–ª–∏—Å—è –≤–∏–±–æ—Ä–∏ –¥–æ –∞–≤—Å—Ç—Ä—ñ–π—Å—å–∫–æ–≥–æ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç—É –∑–∞ –Ω–æ–≤–∏–º –≤–∏–±–æ—Ä—á–∏–º –∑–∞–∫–æ–Ω–æ–º. –£ –≤—Å—ñ—Ö —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –≤–∏–±–æ—Ä—á–∏—Ö –æ–∫—Ä—É–≥–∞—Ö –ø–µ—Ä–µ–º–æ–≥–ª–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–∏ ¬´–ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó —Ä–∞–¥–∏ —Ä—É—Å–∏–Ω—ñ–≤ –Ω–∞ –ë—É–∫–æ–≤–∏–Ω—ñ¬ª. –£–ø–µ—Ä—à–µ –ø—ñ—Å–ª—è 1848 —Ä. –±—É–∫–æ–≤–∏–Ω—Å—å–∫—ñ —É–∫—Ä–∞- —ó–Ω—Ü—ñ –æ–±—Ä–∞–ª–∏ –ø‚Äô—è—Ç—å–æ—Ö –¥–µ–ø—É—Ç–∞—Ç—ñ–≤. –£ –ª—é—Ç–æ–º—É 1910 —Ä. –≤–æ–Ω–∞ –æ–±‚Äô—î–¥- –Ω–∞–ª–∞—Å—è –∑—ñ —Å—Ç–≤–æ—Ä–µ–Ω–∏–º –°. –°–º–∞–ª—å-–°—Ç–æ—Ü—å–∫–∏–º —Ç–æ–≤–∞—Ä–∏—Å—Ç–≤–æ–º ¬´–†—É—Å—å–∫–∞ —Ä–∞–¥–∞¬ª (—ó—ó –Ω–∞–∑–∏–≤–∞–ª–∏ —Ç–∞–∫–æ–∂ ¬´–º—É–∂–∏—Ü—å–∫–∞ –ø–∞—Ä—Ç—ñ—è¬ª) —É –Ω–æ–≤—É –ø–∞—Ä—Ç—ñ—é –ø—ñ–¥ –Ω–∞–∑–≤–æ—é ¬´–†—É—Å—å–∫–∞ —Ä–∞–¥–∞¬ª. –£ 1912 —Ä. –≤–æ–Ω–∞ —Ä–æ–∑–ø–∞–ª–∞—Å—è. –ö–æ–ª–∏—à–Ω—ñ —á–ª–µ–Ω–∏ ¬´–ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—ó —Ä–∞–¥–∏¬ª –æ–≥–æ–ª–æ—Å–∏–ª–∏ –ø—Ä–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ù–∞—Ü—ñ–æ- –Ω–∞–ª—å–Ω–æ-–¥–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω–æ—ó –ø–∞—Ä—Ç—ñ—ó, –∞ –ø—Ä–∏–±—ñ—á–Ω–∏–∫–∏ –°. –°–º–∞–ª—å- –°—Ç–æ—Ü—å–∫–æ–≥–æ ‚Äî –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –Ω–∞—Ä–æ–¥–Ω–æ—ó –ø–∞—Ä—Ç—ñ—ó. –û–¥–Ω–∞–∫ –¥–æ –ø–æ—á–∞—Ç–∫—É –≤—ñ–π–Ω–∏ –æ–±–∏–¥–≤—ñ –ø–∞—Ä—Ç—ñ—ó –æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–µ —Å—Ñ–æ—Ä–º—É–≤–∞–ª–∏—Å—è.
        –£ 1911 —Ä. –≤—ñ–¥–±—É–ª–∏—Å—è –æ—Å—Ç–∞–Ω–Ω—ñ –≤–∏–±–æ—Ä–∏ –¥–æ –ë—É–∫–æ–≤–∏–Ω—Å—å–∫–æ–≥–æ –∫—Ä–∞- –π–æ–≤–æ–≥–æ —Å–µ–π–º—É. –Ü–∑ 17 –æ–±—Ä–∞–Ω–∏—Ö —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –¥–µ–ø—É—Ç–∞—Ç—ñ–≤ 15 –±—É–ª–∏ –Ω–∞- —Ä–æ–¥–æ–≤—Ü—è–º–∏, –ø–æ –æ–¥–Ω–æ–º—É –≤—ñ–¥ —Ä–∞–¥–∏–∫–∞–ª—ñ–≤ —ñ —Å–æ—Ü—ñ–∞–ª-–¥–µ–º–æ–∫—Ä–∞—Ç—ñ–≤. –ú–æ—Å–∫- –≤–æ—Ñ—ñ–ª–∏ –Ω–∞ –≤–∏–±–æ—Ä–∞—Ö –∑–∞–∑–Ω–∞–ª–∏ –ø–æ—Ä–∞–∑–∫–∏.
        –ú–∏–∫–æ–ª–∞ –í–∞—Å–∏–ª—å–∫–æ
          –ê—É—Ä–µ–ª –û–Ω—á—É–ª
         –ë–µ–Ω–Ω–æ –®—Ç—Ä–∞—É—Ö–µ—Ä
        221
        –†–æ–∑–¥—ñ–ª VII. –ó–∞—Ö—ñ–¥–Ω–æ—É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ –∑–µ–º–ª—ñ —É —Å–∫–ª–∞–¥—ñ –ê–≤—Å—Ç—Ä–æ¬≠–£–≥–æ—Ä—Å—å–∫–æ—ó —ñ–º–ø–µ—Ä—ñ—ó –Ω–∞ –ø–æ—á–∞—Ç–∫—É XX —Å—Ç.
          –ê–≤–≥—É—Å—Ç–∏–Ω –í–æ–ª–æ—à–∏–Ω
        –ù–∞ –ø–æ—á–∞—Ç–∫—É XX —Å—Ç. –≤ —Å—É—Å–ø—ñ–ª—å–Ω–æ-–ø–æ–ª—ñ—Ç–∏—á–Ω–æ–º—É –∂–∏—Ç—Ç—ñ –ó–∞–∫–∞—Ä- –ø–∞—Ç—Ç—è –ø—Ä–æ–≤—ñ–¥–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó –∑–±–µ—Ä—ñ–≥–∞–≤ –º–æ—Å–∫–≤–æ—Ñ—ñ–ª—å—Å—å–∫–∏–π –Ω–∞–ø—Ä—è–º–æ–∫. –û–¥- –Ω–∞–∫ —É —Ü–µ–π —á–∞—Å –∑–∞—Ä–æ–¥–∏–ª–æ—Å—è –π –Ω–∞—Ä–æ–¥–æ–≤—Å—Ç–≤–æ. –ú–æ–ª–æ–¥—ñ —Ä—É—Å–∏–Ω—Å—å–∫—ñ –¥—ñ—è- —á—ñ, —è–∫—ñ –∑–∞—Å–Ω—É–≤–∞–ª–∏ –π–æ–≥–æ, —à—É–∫–∞–ª–∏ –Ω–æ–≤—ñ –∑–∞—Å–æ–±–∏ –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –≤–∏–∂–∏–≤–∞–Ω–Ω—è —Å–≤–æ–≥–æ –Ω–∞—Ä–æ–¥—É –≤ —É–º–æ–≤–∞—Ö –º–∞–¥—è—Ä–∏–∑–∞—Ü—ñ—ó. –ü–µ—Ä–µ–∫–æ–Ω–∞–≤—à–∏—Å—å —É –±–µ–∑–ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –º–æ—Å–∫–≤–æ—Ñ—ñ–ª—å—Å—Ç–≤–∞, –≤–æ–Ω–∏ –∑–≤–∏–Ω—É–≤–∞—á—É–≤–∞–ª–∏ –π–æ–≥–æ –ø—Ä–∏–±—ñ—á–Ω–∏–∫—ñ–≤ —É –∑–∞–Ω–µ–ø–∞–¥—ñ —Ä—É—Å–∏–Ω—Å—å–∫–æ–≥–æ –Ω–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∂–∏—Ç—Ç—è –≤ –∫—Ä–∞—ó. –í–∏—Ä—ñ—à–∞–ª—å–Ω–∏–º –∫—Ä–æ–∫–æ–º —Å—Ç–∞–ª–∞ –≤—ñ–¥–º–æ–≤–∞ –∑–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∏—Ö –Ω–∞—Ä–æ–¥–æ–≤—Ü—ñ–≤ –≤—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–æ—Å—ñ–π—Å—å–∫–æ—ó –º–æ–≤–∏ —Ç–∞ –≤–∏–±—ñ—Ä –Ω–∏–º–∏ —è–∫ –º–æ–≤–∏ –æ—Å–≤—ñ—Ç–∏ –π –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∏ –Ω–∞—Ä–æ–¥–Ω–æ—ó –º–æ–≤–∏.
        –î—Ä—É–∫–æ–≤–∞–Ω–∏–º –æ—Ä–≥–∞–Ω–æ–º –Ω–∞—Ä–æ–¥–æ–≤—Å—å–∫–æ–≥–æ —Ä—É—Ö—É –≤ –∫—Ä–∞—ó —Å—Ç–∞–≤ —Ç–∏–∂- –Ω–µ–≤–∏–∫ ¬´–ù–∞—É–∫–∞¬ª, —â–æ –≤–∏—Ö–æ–¥–∏–≤ —ñ–∑ 1897 —Ä. –ô–æ–≥–æ –≥–æ–ª–æ–≤–Ω–∏–º —Ä–µ–¥–∞–∫- —Ç–æ—Ä–æ–º —ñ–∑ 1903 —Ä. –±—É–≤ –ê–≤–≥—É—Å—Ç–∏–Ω –í–æ–ª–æ—à–∏–Ω (1874‚Äî1945), —è–∫–∏–π –∑–≥–æ–¥–æ–º –≤—ñ–¥—ñ–≥—Ä–∞–≤ –≤–∏–∑–Ω–∞—á–Ω—É —Ä–æ–ª—å –≤ —ñ—Å—Ç–æ—Ä—ñ—ó –ó–∞–∫–∞—Ä–ø–∞—Ç—Ç—è.
        –†–æ–∑–≤–∏—Ç–æ–∫ –Ω–∞—Ä–æ–¥–æ–≤—Å—Ç–≤–∞ –≤ –∫—Ä–∞—ó –≤—ñ–¥–±—É–≤–∞–≤—Å—è –ø—ñ–¥ –≤–ø–ª–∏–≤–æ–º —ñ –≤ —Ç—ñ—Å- –Ω—ñ–π –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º —Ä—É—Ö–æ–º –ì–∞–ª–∏—á–∏–Ω–∏. –ó–æ–∫—Ä–µ–º–∞, –ø—Ä–∞—Ü—ñ –∑–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∏—Ö —É—á–µ–Ω–∏—Ö —ñ –≥—Ä–æ–º–∞–¥—Å—å–∫–∏—Ö –¥—ñ—è—á—ñ–≤ –¥—Ä—É–∫—É–≤–∞–ª–∏—Å—è —É –≤–∏- –¥–∞–Ω–Ω—è—Ö –ù–∞—É–∫–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∏—Å—Ç–≤–∞ —ñ–º. –¢. –®–µ–≤—á–µ–Ω–∫–∞ —É –õ—å–≤–æ–≤—ñ, –∞ –≥—Ä–æ- –º–∞–¥—Å—å–∫—ñ –¥—ñ—è—á—ñ –ì–∞–ª–∏—á–∏–Ω–∏ (–Ü. –§—Ä–∞–Ω–∫–æ, –°. –¢–æ–º–∞—à—ñ–≤—Å—å–∫–∏–π, –í. –ì–Ω–∞- —Ç—é–∫ —Ç–∞ —ñ–Ω—à—ñ) –¥–æ–∫–ª–∞–¥–∞–ª–∏ —á–∏–º–∞–ª–æ –∑—É—Å–∏–ª—å –¥–ª—è –æ–∑–Ω–∞–π–æ–º–ª–µ–Ω–Ω—è —Å–≤—ñ—Ç–æ–≤–æ—ó –≥—Ä–æ–º–∞–¥—Å—å–∫–æ—Å—Ç—ñ –∑ –±–µ–∑–ø—Ä–∞–≤–Ω–∏–º —Å—Ç–∞–Ω–æ–≤–∏—â–µ–º –∑–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∏—Ö —Ä—É—Å–∏–Ω—ñ–≤.
        –†–æ–ª—å –Ω–∞—Ä–æ–¥–æ–≤—Ü—ñ–≤ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Å—Ç–æ–ª—ñ—Ç—Ç—è –≤ —Å—É—Å–ø—ñ–ª—å–Ω–æ-–ø–æ–ª—ñ—Ç–∏—á- –Ω–æ–º—É –∂–∏—Ç—Ç—ñ –ó–∞–∫–∞—Ä–ø–∞—Ç—Ç—è –±—É–ª–∞ –¥–æ—Å–∏—Ç—å –Ω–µ–ø–æ–º—ñ—Ç–Ω–æ—é. –á—Ö –¥—ñ—è–ª—å–Ω—ñ—Å—Ç—å –æ–±–º–µ–∂—É–≤–∞–ª–∞—Å—è –ø–∏—Ç–∞–Ω–Ω—è–º–∏ –º–æ–≤–∏, –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∏, —ñ—Å—Ç–æ—Ä—ñ—ó –π –æ—Å–≤—ñ—Ç–∏. –í–æ–Ω–∏ –Ω–µ –ø—Ä–∞–≥–Ω—É–ª–∏ –Ω–∞–¥–∞–Ω–Ω—è –∫—Ä–∞—é –∞–≤—Ç–æ–Ω–æ–º—ñ—ó –∞–±–æ —Å–∞–º–æ–≤—Ä—è–¥—É–≤–∞–Ω–Ω—è, –Ω–µ –≤–∏—Å—Ç—É–ø–∞–ª–∏ –∑–∞ –π–æ–≥–æ –ø—Ä–∏—î–¥–Ω–∞–Ω–Ω—è –¥–æ —Ä–µ—à—Ç–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –∑–µ–º–µ–ª—å. –ì–æ–ª–æ–≤–Ω–∏–º –∑–∞–≤–¥–∞–Ω–Ω—è–º –Ω–∞—Ä–æ–¥–æ–≤—Ü—ñ –≤–≤–∞–∂–∞–ª–∏ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ç—ñ –ø—Ä–æ—è–≤–∏ –Ω–∞- —Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∂–∏—Ç—Ç—è, —è–∫—ñ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É —Å–ø—Ä–∏—è—Ç–∏–º—É—Ç—å –≤—ñ–¥—Ä–æ–¥–∂–µ–Ω- –Ω—é –ó–∞–∫–∞—Ä–ø–∞—Ç—Ç—è.
        """

    if uploaded_file:
        # Process the uploaded file and question.
        document = uploaded_file.read().decode()

    if document:
        messages_en = [
            {
                "role": "user",
                "content": f"""You are a highly skilled history professor with expertise in Ukrainian history. Your task is to generate multiple choice questions based on the provided text. Follow these specific requirements:

                Please analyze the following text from a Ukrainian history textbook:
                {document}

                Output Requirements
                Generate 10 multiple choice questions that:

                Directly reference information from the provided text
                Include exactly 4 options (A, B, C, D) per question
                Have exactly one correct answer
                Maintain consistent difficulty appropriate for [GRADE LEVEL] students

                For each question, provide:

                - Question number
                - Question text
                - Four answer choices (labeled A-D)
                - The correct answer (marked with *)
                - Brief explanation of why the correct answer is right and why the distractors are wrong

                Question Distribution
                Generate questions in this ratio:

                3 questions testing factual recall
                3 questions testing comprehension/understanding
                2 questions testing analysis/interpretation
                2 questions testing cause-and-effect relationships

                Answer Choice Guidelines

                All distractors must be historically plausible
                Maintain similar length and grammatical structure
                Avoid absolutes (always, never, all, none)
                Each distractor should represent a common misconception or partial understanding
                Ensure historical accuracy in all options, even incorrect ones

                Format Each Question As:
                Q[number]: [Question text]

                A) [Option A]
                B) [Option B]
                C) [Option C]
                D) [Option D]

                Correct Answer: [Letter]

                Explanation:
                - Why correct answer is right: [brief explanation]
                - Why other options are wrong: [brief explanation for each]

                Question Type: [Factual/Comprehension/Analysis/Cause-Effect]
                Additional Parameters:

                - Use clear, grade-appropriate language
                - Include relevant dates and context
                - Avoid negative phrasing
                - Focus on significant historical developments
                - Balance questions between political, social, cultural, and economic aspects
                - Ensure questions progress from simpler to more complex concepts
                """,
            }
        ]
        messages_ua = [
            {
                "role": "user",
                "content": f"""–í–∏ ‚Äì –≤–∏—Å–æ–∫–æ–∫–≤–∞–ª—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–π –ø—Ä–æ—Ñ–µ—Å–æ—Ä —ñ—Å—Ç–æ—Ä—ñ—ó, —â–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è –Ω–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ–π —ñ—Å—Ç–æ—Ä—ñ—ó. –í–∞—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äì —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –∑ –±–∞–≥–∞—Ç—å–º–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞–¥–∞–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É.
                –î–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—å –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–º–æ–≥:
                –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ç–µ–∫—Å—Ç –∑ –ø—ñ–¥—Ä—É—á–Ω–∏–∫–∞ –∑ —ñ—Å—Ç–æ—Ä—ñ—ó –£–∫—Ä–∞—ó–Ω–∏:

                {document}

                –í–∏–º–æ–≥–∏ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                –°—Ç–≤–æ—Ä—ñ—Ç—å 10 –∑–∞–ø–∏—Ç–∞–Ω—å –∑ –º–Ω–æ–∂–∏–Ω–Ω–∏–º –≤–∏–±–æ—Ä–æ–º, —è–∫—ñ:

                –ë–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ –Ω–∞–¥–∞–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
                –ú—ñ—Å—Ç—è—Ç—å —Ä—ñ–≤–Ω–æ 4 –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (–ê, –ë, –í, –ì) –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è
                –ú–∞—é—Ç—å –ª–∏—à–µ –æ–¥–Ω—É –ø—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å

                - –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –≤–∫–∞–∂—ñ—Ç—å:
                - –ù–æ–º–µ—Ä –∑–∞–ø–∏—Ç–∞–Ω–Ω—è
                - –¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç–∞–Ω–Ω—è
                - –ß–æ—Ç–∏—Ä–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (–ø–æ–∑–Ω–∞—á–µ–Ω—ñ –ê-–ì)
                - –ü—Ä–∞–≤–∏–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å (–ø–æ–∑–Ω–∞—á–µ–Ω—É *)
                - –ö–æ—Ä–æ—Ç–∫–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è, —á–æ–º—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞ —Ç–∞ —á–æ–º—É —ñ–Ω—à—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ

                –†–æ–∑–ø–æ–¥—ñ–ª –∑–∞–ø–∏—Ç–∞–Ω—å

                –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–ø–∏—Ç–∞–Ω–Ω—è —É —Ç–∞–∫–æ–º—É —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—ñ:

                3 –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ñ–∞–∫—Ç–æ–ª–æ–≥—ñ—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó
                3 –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–∑—É–º—ñ–Ω–Ω—è
                2 –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∞–Ω–∞–ª—ñ–∑—É —Ç–∞ —ñ–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü—ñ—ó
                2 –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ø—Ä–∏—á–∏–Ω–Ω–æ-–Ω–∞—Å–ª—ñ–¥–∫–æ–≤–∏—Ö –∑–≤‚Äô—è–∑–∫—ñ–≤

                –í–∏–º–æ–≥–∏ –¥–æ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

                –£—Å—ñ –¥–∏—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∏ –º–∞—é—Ç—å –±—É—Ç–∏ —ñ—Å—Ç–æ—Ä–∏—á–Ω–æ –ø—Ä–∞–≤–¥–æ–ø–æ–¥—ñ–±–Ω–∏–º–∏
                –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –æ–¥–Ω–∞–∫–æ–≤–æ—ó –¥–æ–≤–∂–∏–Ω–∏ —Ç–∞ –≥—Ä–∞–º–∞—Ç–∏—á–Ω–æ—ó —Å—Ç—Ä—É–∫—Ç—É—Ä–∏
                –£–Ω–∏–∫–∞–π—Ç–µ –∞–±—Å–æ–ª—é—Ç—ñ–≤ (–∑–∞–≤–∂–¥–∏, –Ω—ñ–∫–æ–ª–∏, —É—Å—ñ, –∂–æ–¥–µ–Ω)
                –ö–æ–∂–µ–Ω –¥–∏—Å—Ç—Ä–∞–∫—Ç–æ—Ä –ø–æ–≤–∏–Ω–µ–Ω –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ –ø–æ—à–∏—Ä–µ–Ω—É –ø–æ–º–∏–ª–∫—É –∞–±–æ —á–∞—Å—Ç–∫–æ–≤–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è
                –ó–∞–±–µ–∑–ø–µ—á—Ç–µ —ñ—Å—Ç–æ—Ä–∏—á–Ω—É —Ç–æ—á–Ω—ñ—Å—Ç—å —É –≤—Å—ñ—Ö –≤–∞—Ä—ñ–∞–Ω—Ç–∞—Ö, –Ω–∞–≤—ñ—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö

                –§–æ—Ä–º–∞—Ç –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è:
                –ü[–Ω–æ–º–µ—Ä]: [–¢–µ–∫—Å—Ç –∑–∞–ø–∏—Ç–∞–Ω–Ω—è]

                –ê) [–í–∞—Ä—ñ–∞–Ω—Ç –ê]
                –ë) [–í–∞—Ä—ñ–∞–Ω—Ç –ë]
                –í) [–í–∞—Ä—ñ–∞–Ω—Ç –í]
                –ì) [–í–∞—Ä—ñ–∞–Ω—Ç –ì]

                –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: [–õ—ñ—Ç–µ—Ä–∞]

                –ü–æ—è—Å–Ω–µ–Ω–Ω—è:
                –ß–æ–º—É –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞: [–∫–æ—Ä–æ—Ç–∫–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è]
                –ß–æ–º—É —ñ–Ω—à—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ: [–∫–æ—Ä–æ—Ç–∫–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ]

                –¢–∏–ø –∑–∞–ø–∏—Ç–∞–Ω–Ω—è: [–§–∞–∫—Ç–æ–ª–æ–≥—ñ—á–Ω–µ/–†–æ–∑—É–º—ñ–Ω–Ω—è/–ê–Ω–∞–ª—ñ–∑/–ü—Ä–∏—á–∏–Ω–Ω–æ-–Ω–∞—Å–ª—ñ–¥–∫–æ–≤–µ]
                –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

                - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —á—ñ—Ç–∫—É, –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –¥–ª—è —Ä—ñ–≤–Ω—è —É—á–Ω—ñ–≤ –º–æ–≤—É
                - –í–∫–ª—é—á–∞–π—Ç–µ –≤–∞–∂–ª–∏–≤—ñ –¥–∞—Ç–∏ —Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç
                - –£–Ω–∏–∫–∞–π—Ç–µ –∑–∞–ø–µ—Ä–µ—á–Ω–∏—Ö —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω—å
                - –ó–æ—Å–µ—Ä–µ–¥–∂—É–π—Ç–µ—Å—è –Ω–∞ –∑–Ω–∞—á–Ω–∏—Ö —ñ—Å—Ç–æ—Ä–∏—á–Ω–∏—Ö –ø–æ–¥—ñ—è—Ö
                - –ë–∞–ª–∞–Ω—Å—É–π—Ç–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è –º—ñ–∂ –ø–æ–ª—ñ—Ç–∏—á–Ω–∏–º–∏, —Å–æ—Ü—ñ–∞–ª—å–Ω–∏–º–∏, –∫—É–ª—å—Ç—É—Ä–Ω–∏–º–∏ —Ç–∞ –µ–∫–æ–Ω–æ–º—ñ—á–Ω–∏–º–∏ –∞—Å–ø–µ–∫—Ç–∞–º–∏
                - –ó–∞–±–µ–∑–ø–µ—á—Ç–µ –ø–æ—Å—Ç—É–ø–æ–≤–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –≤—ñ–¥ –ø—Ä–æ—Å—Ç–∏—Ö –¥–æ —Å–∫–ª–∞–¥–Ω—ñ—à–∏—Ö –ø–æ–Ω—è—Ç—å
                """,
            }
        ]
        st.write("=======ENGLISH===========")
        with st.spinner("Performing task in EN..."):
            start_time = time.time()
            response = client.chat.completions.create(
                model="accounts/fireworks/models/llama-v3p1-8b-instruct",
                messages=messages_en,
            )
            execution_time_en = time.time() - start_time
            response_tokens_en = response.usage.completion_tokens
            response_chars_en = len(response.choices[0].message.content)

            output_text = response.choices[0].message.content
            # print(output_text)
            st.write(output_text)

        st.write("=======Ukrainian=========")
        with st.spinner("Performing task in UA..."):
            start_time = time.time()
            response = client.chat.completions.create(
                model="accounts/fireworks/models/llama-v3p1-8b-instruct",
                messages=messages_ua,
            )
            execution_time_ua = time.time() - start_time
            response_tokens_ua = response.usage.completion_tokens
            response_chars_ua = len(response.choices[0].message.content)

            output_text = response.choices[0].message.content
            # print(output_text)
            st.write(output_text)

        # st.write("=======Inference Stats=========")
        # df = pd.DataFrame(
        #     [
        #         (
        #             "en",
        #             response_chars_en,
        #             # response_chars_en / execution_time_en,
        #             response_tokens_en,
        #             # response_tokens_en / execution_time_en,
        #             response_chars_en / response_tokens_en,
        #         ),
        #         (
        #             "ua",
        #             response_chars_ua,
        #             # response_chars_ua / execution_time_ua,
        #             response_tokens_ua,
        #             # response_tokens_ua / execution_time_ua,
        #             response_chars_ua / response_tokens_ua,
        #         ),
        #     ],
        #     columns=[
        #         "language",
        #         "chars generated",
        #         # "chars/s",
        #         "tokens used",
        #         # "tok/s",
        #         "char/tok",
        #     ],
        # )

        # st.table(df)
